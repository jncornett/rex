(function(g,d){var l,e,b,h,k,a,f,j,c,i=g.document;l=function(n,m){var o=new RegExp(n,m);f=[];rex.regexForEach(o,function(p,q){f.push(rex.makeRexElement(p,q))});if(f.length){j=i.getElementsByClassName("rex-match");k(a=0)}else{f=j=a=d}};e=function(){if(f){f.forEach(function(m){var n=m.getElementsByClassName("rex-reversion")[0];m.removeChild(n);m.parentElement.replaceChild(i.createTextNode(n.textContent),m)})}f=j=a=d};b=function(){e()};h=function(m){j[m].classList.remove("rex-active")};k=function(m){var n=j[m];n.classList.add("rex-active");n.scrollIntoView()};c=chrome.runtime.connect();c.onDisconnect.addListener(function(){b()});c.onMessage.addListener(function(m){if(m.search){e();l(m.search.regex,m.search.flags)}else{if(m.hilight&&f.length){h(a);a=(a+m.hilight.direction)%f.length;k(a)}else{if(m.clear){e()}}}})})(this);